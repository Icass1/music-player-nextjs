#!/bin/bash

set -e

# Set HOST variable on the local machine
HOST=$(hostname)

# Use SSH to execute commands on the remote machine
ssh icass@12.12.12.3 '
HOST="'$HOST'"
rm -rf /home/icass/HomeDrive/root/Programming/music-player-nextjs/node_modules
if test -d $HOST.node_modules; then
    cp -r /home/icass/HomeDrive/root/Programming/music-player-nextjs/$HOST.node_modules /home/icass/HomeDrive/root/Programming/music-player-nextjs/node_modules
else
    npm install
    cp -r /home/icass/HomeDrive/root/Programming/music-player-nextjs/node_modules /home/icass/HomeDrive/root/Programming/music-player-nextjs/$HOST.node_modules
fi
'

